{"version":3,"sources":["layouts/MonitoringWorkout/styles.module.scss","layouts/PrepareWorkout/styles.module.scss","layouts/FinishedWorkout/styles.module.scss","layouts/AdminDashboard/styles.module.scss","layouts/UserList/styles.module.scss","layouts/DifficulityList/styles.module.scss","layouts/RecordList/styles.module.scss","layouts/SignIn/styles.module.scss","components/Header/styles.module.scss","layouts/Missing/styles.module.scss","layouts/Unauthorized/styles.module.scss","store/actions.js","constants/path.js","constants/roles.js","constants/warn.js","store/index.js","routes/ProtectedRoutes.js","services/firebase.js","layouts/SignIn/index.js","layouts/AdminDashboard/index.js","assets/images/right-arrow.png","components/Header/index.js","layouts/Missing/index.js","layouts/Unauthorized/index.js","util/helper.js","util/wait.js","layouts/PrepareWorkout/index.js","assets/sounds/warn-slight.wav","assets/sounds/warn-medium.wav","assets/sounds/warn-high.wav","assets/sounds/notification.wav","assets/sounds/goal-archieved.wav","util/useAudio.js","util/formatSeconds.js","util/configLineChart.js","components/StopWatch/index.js","layouts/MonitoringWorkout/index.js","layouts/UserList/index.js","layouts/DifficulityList/index.js","layouts/FinishedWorkout/index.js","layouts/RecordList/index.js","routes/index.js","layouts/App/index.js","index.js"],"names":["module","exports","SET_AUTH","ROUTE_PATH","home","sign_in","unauthorized","admin_dashbaord","prepare_workout","monitoring_workout","user_list","difficulty_list","record_list","finsished_workout","ROLES","WARN","WARN_THRESHOLD","StoreContext","createContext","initialState","auth","isValid","roles","Editor","reducer","state","action","type","payload","StoreProvider","children","useReducer","value","dispatch","Provider","useStore","useContext","ProtectedRoutes","allowedRoles","find","role","includes","replace","to","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","getAuth","usersRef","collection","recordsRef","difficultiesRef","validateInputPairId","pairId","a","q","query","where","getDocs","querySnapshot","empty","size","forEach","doc","record","data","recordId","id","finishedWorkoutTime","generateValidPairId","pass","test","getRandomPairId","isPairIdValid","Math","floor","random","toString","Content","Layout","Title","Typography","formLayout","labelCol","span","wrapperCol","tailLayout","offset","SignIn","navigate","useNavigate","Form","useForm","form","useState","loading","setLoading","login","validateFields","values","console","log","signInWithEmailAndPassword","email","password","userCredential","user","Admin","goDashboard","message","error","className","style","padding","styles","container","layout","autoComplete","Item","label","colon","marginBottom","level","name","rules","required","placeholder","Password","htmlType","onClick","TileWithIconAndAction","icon","tile","addOn","backgroundImage","tileIcon","tileLabel","AdminDashboard","TeamOutlined","SlidersOutlined","ProfileOutlined","RocketOutlined","Header","Missing","Unauthorized","helper","object","defaults","_","list","iteratee","context","Set","Array","from","index","array","call","each","map","obj","mapObject","memo","reduce","every","some","predicate","result","Map","entries","entry","key","findIndex","filter","this","length","max","min","any","isArray","n","isEmpty","first","last","has","b","File","i","JSON","stringify","isNullOrUndefined","isString","isPrimitive","Object","isBoolean","isNumber","isFunction","isDate","isNull","isUndefined","undefined","isExisted","isNotExisted","isObject","Number","isInteger","isFinite","isNaN","isFile","json","parse","e","proto","getPrototypeOf","prototype","React","isValidElement","wait","ms","Promise","resolve","setTimeout","Countdown","Statistic","Option","Select","Text","initialPacket","rpm","time","heartRate","unsubscribe","WarnHRValueDisplay","warn","phase","overVal","display","fontSize","PrepareWorkout","users","setUsers","difficulties","setDifficulties","isDone","setIsDone","selectedUser","setSelectedUser","selectedDiff","setSelectedDiff","selectedUserData","setSelectedUserData","selectedDiffData","setSelectedDiffData","userModalVis","setUserModalVis","diffModalVis","setDiffModalVis","warnHRValues","setWarnHRValues","isPairing","setIsPairing","targetgetRecordId","setTargetRecordId","setPairId","isAppConnected","setIsAppConnected","pairDeadline","setPairDeadline","inputPairId","setInputPairId","useEffect","init","fetchUsers","fetchDiffs","targetRecordRef","onSnapshot","currData","updateDoc","success","push","Modal","confirm","title","ExclamationCircleOutlined","content","onOk","deleteRecord","confirmUserAndDiff","createRecord","theDiff","d","targetHeartRate","upperLimitHeartRate","difficulty","createdTime","Timestamp","now","addDoc","beginWorkoutTime","deadline","Date","info","leave","deleteDoc","pairWithApp","theRecordId","alert","onDeadlineExpired","resetFields","getExactThresholdValue","calBase","overHigh","ceil","overMedium","simulateAppCotent","pairing","Search","allowClear","onChange","target","onSearch","disabled","PageHeader","subTitle","onBack","marginTop","gutter","u","diff","targetWorkoutTime","visible","onCancel","footer","bordered","descriptions","age","note","width","column","color","text","alignItems","dashed","minWidth","borderWidth","margin","marginRight","placement","trigger","SettingOutlined","pairIdWrapper","split","c","onFinish","indicator","LoadingOutlined","spin","ArrowRightOutlined","OTHER_SOUND","Notification","Archieved","useAudio","Audio","other_notification_url","audioPlayer","getAudioPermission","play","playWarnSound","src","warn_slight_url","warn_medium_url","warn_high_url","playOtherSound","sound","other_archieved_url","formatSeconds","input","sec_num","parseInt","hours","minutes","seconds","formatted","configLineChart","xField","yField","yAxis","legend","itemName","formatter","item","meta","alias","geometryOptions","geometry","lineStyle","lineWidth","lineDash","smooth","opacity","point","shape","stroke","fill","annotations","start","end","offsetY","position","textAlign","tooltip","showTitle","StopWatch","initialValue","setTime","miliDisplay","setMiliDisplay","interval","displayInterval","setInterval","clearInterval","slice","unsubscribeRecord","unsubscribePackets","MonitoringWorkout","params","useParams","setRecord","setUser","setDifficulty","packets","setPackets","isInitRecordDone","setIsInitRecordDone","isInitPacketsDone","setIsInitPacketsDone","beginStopWatch","setBeginStopWatch","nextHeartRateVal","setNextHeartRateVal","grantAudioPerssion","begin","isNotEmpty","evaluateCurrPacket","checkIntegrity","listenRecordChange","listenPacketsChange","maskClosable","recordRef","getDoc","recordSnapshot","recordData","userRef","userSnapshot","difficultyRef","diffSnapshot","toDate","packetsRef","newPackets","timeLabel","formatWithMoment","sort","splice","packet","overSlight","sendNotification","addRpmAndHeartRate","nextPacket","goFinishWorkout","notification","description","open","SmileOutlined","popoverContent","enterButton","glass","col","col1","col2","stopWatchWrapper","moment","duration","asMilliseconds","getStopWatchInitialValue","format","col3","mainCol","columns","openViewModal","openEditModal","onDeleteUser","dataIndex","sorter","compare","align","render","direction","danger","MoreOutlined","rotate","modalFormLayout","UserList","filteredUser","setFilteredUser","searchBarRef","useRef","currUser","setCurrUser","searchForm","editForm","createForm","createModalVisible","setCreateModalVisible","viewModalVisible","setViewModalVisible","editModalVisible","setEditModalVisible","current","blur","onCreateUser","isDeleted","closeAllModals","onPatchUser","currUserRef","deleteUser","theUserRef","extra","PlusOutlined","clearIcon","CloseCircleFilled","ref","SearchOutlined","setFieldsValue","theUser","okText","okType","cancelText","dataSource","pagination","pageSize","marginLeft","confirmLoading","destroyOnClose","addonAfter","TextArea","showCount","maxLength","autoSize","minRows","maxRows","onDeleteDiff","DifficulityList","filteredDiffs","setFilteredDiffs","currDiff","setCurrDiff","createFormChange","setCreateFormChange","editFormChange","setEditFormChange","onCreateDiff","onPatchDiff","deleteDiff","theDiffRef","onFormValueChange","changedVal","allVal","formKey","onValuesChange","FinishedWorkout","therapist","setTherapist","comment","setComment","inputStatus","setInputStatus","onFormSubmit","preventDefault","updateTherapistInfo","h","m","s","returnStr","calWorkoutTime","toLocaleString","prefix","UserOutlined","status","userData","difficultyData","currRecord","RecordList","records","setReocrds","filteredRecords","setFilteredReocrds","setCurrRecord","currReocrdPackets","setCurrRecordPackets","fetchRecords","patchRecordsWithUserAndDiff","getTime","patchedRecords","userId","r","AppRoutes","path","element","AppProvider","initializedDone","setInitializedDone","attempLogin","window","addEventListener","beforeunloadListener","visibilitychangeListener","removeEventListener","document","visibilityState","locale","ReactDOM","StrictMode","basename","App","getElementById"],"mappings":"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","file":"static/js/main.2f696b4a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2O6lW\",\"glass\":\"styles_glass__3MZ6q\",\"col\":\"styles_col__3dx1b\",\"mainCol\":\"styles_mainCol__2K9mE\",\"col1\":\"styles_col1__1e9Hq\",\"col2\":\"styles_col2__2sM5V\",\"col3\":\"styles_col3__ZFdLr\",\"stopWatchWrapper\":\"styles_stopWatchWrapper__YtDaA\",\"difficulty\":\"styles_difficulty__27-NT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3NK8e\",\"pairIdWrapper\":\"styles_pairIdWrapper__RnU7L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__msRCF\",\"pageHeader\":\"styles_pageHeader__242Ry\",\"descriptions\":\"styles_descriptions__aLChC\",\"form\":\"styles_form__3ok_y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3-pv1\",\"tile\":\"styles_tile__ld1d9\",\"addOn\":\"styles_addOn__lAcI5\",\"tileIcon\":\"styles_tileIcon__3Rzsu\",\"tileLabel\":\"styles_tileLabel__21knx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3BM2M\",\"descriptions\":\"styles_descriptions__2Jtwo\",\"form\":\"styles_form__a3cRe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2hB-r\",\"descriptions\":\"styles_descriptions__1kY2t\",\"form\":\"styles_form__1Qnic\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3HuKR\",\"descriptions\":\"styles_descriptions__3UP8P\",\"form\":\"styles_form__1qrcZ\",\"pageHeader\":\"styles_pageHeader__3-ZV-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2s08f\",\"scroll\":\"styles_scroll__2lbTr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__103ut\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__Hfgws\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__333xu\"};","export const SET_AUTH = 'SET_AUTH';\n","const ROUTE_PATH = {\n    home: '/',\n    sign_in: '/sign-in',\n    unauthorized: '/unauthorized',\n    admin_dashbaord: '/dashboard',\n    prepare_workout: '/prepare-workout',\n    monitoring_workout: '/monitoring-workout',\n    user_list: '/user-list',\n    difficulty_list: '/difficulty-list',\n    record_list: '/record-list',\n    finsished_workout: '/finished-workout',\n};\n\nexport default ROUTE_PATH;\n","const ROLES = {\n    'User': 2001,\n    'Editor': 1984,\n    'Admin': 5150,\n};\n\nexport default ROLES;\n","const WARN = {\n    Slight: 'slight',\n    Medium: 'medium',\n    High: 'high',\n};\n\nconst WARN_THRESHOLD = {\n    Slight: 105,\n    Medium: 115,\n    High: 120,\n};\n\nexport { WARN, WARN_THRESHOLD };\n","import { createContext, useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { SET_AUTH } from './actions';\n\nimport { ROLES } from '../constants';\n\nconst StoreContext = createContext();\n\nconst initialState = {\n    auth: {\n        isValid: true,\n        roles: [ROLES.Editor], // 1984: Editor ; 5150: Admin\n    },\n};\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case SET_AUTH:\n            return {\n                ...state,\n                auth: {\n                    ...action.payload,\n                },\n            };\n        default:\n            return state;\n    }\n};\n\nconst StoreProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const value = { state, dispatch };\n\n    return (\n        <StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n    );\n};\n\nconst useStore = () => {\n    return useContext(StoreContext);\n\n    // Used as custom-hook;\n    // const store = useStore();\n    //\n    // console.log(store)\n    // OUTPUT:\n    // {state: {}, dispatch: }\n};\n\nStoreProvider.propTypes = {\n    children: PropTypes.object,\n};\n\nexport { StoreProvider, StoreContext, useStore };\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { Outlet, Navigate } from 'react-router-dom';\nimport { useStore } from '../store';\nimport { ROUTE_PATH } from '../constants';\n\nconst ProtectedRoutes = ({ allowedRoles }) => {\n    const {\n        state: { auth },\n    } = useStore();\n\n    if (!auth.isValid) {\n        return <Navigate replace to={ROUTE_PATH.sign_in} />;\n    }\n\n    return auth.roles.find((role) => allowedRoles?.includes(role)) ? (\n        <Outlet />\n    ) : (\n        <Navigate replace to={ROUTE_PATH.unauthorized} />\n    );\n};\n\nexport default ProtectedRoutes;\n","// Import the functions you need from the SDKs you need\nimport { initializeApp } from 'firebase/app';\n// import { getAnalytics } from 'firebase/analytics';\nimport {\n    getFirestore,\n    collection,\n    query,\n    where,\n    getDocs,\n} from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n    apiKey: 'AIzaSyDZbsYnhDAV0SWjJw2e81ShRNuNRbz4-iQ',\n    authDomain: 'physical-therapy-system.firebaseapp.com',\n    projectId: 'physical-therapy-system',\n    storageBucket: 'physical-therapy-system.appspot.com',\n    messagingSenderId: '411714019674',\n    appId: '1:411714019674:web:669257e2726581c3525363',\n    measurementId: 'G-93J05VGEJN',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n// const analytics = getAnalytics(app);\nconst db = getFirestore(app);\nexport const auth = getAuth(app);\n\nexport const usersRef = collection(db, 'users');\nexport const recordsRef = collection(db, 'records');\nexport const difficultiesRef = collection(db, 'difficulties');\n\nexport const validateInputPairId = async (pairId) => {\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty || querySnapshot.size != 1) {\n        return false;\n    }\n\n    let record;\n    let recordId;\n    querySnapshot.forEach((doc) => {\n        record = doc.data();\n        recordId = doc.id;\n    });\n\n    if (record?.finishedWorkoutTime != null) {\n        return false;\n    }\n\n    return recordId;\n};\n\nexport const getRpmsWithPairdId = async (pairId) => {\n    let targetRecordId = null;\n\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty) {\n        return null;\n    }\n    if (querySnapshot.size == 1) {\n        querySnapshot.forEach((doc) => {\n            targetRecordId = doc.id;\n        });\n    }\n    console.log(targetRecordId);\n    return collection(recordsRef, targetRecordId, 'rpms');\n};\n\nexport const generateValidPairId = async () => {\n    let pass = false;\n    let pairId = null;\n\n    while (!pass) {\n        const test = getRandomPairId();\n        const validated = await isPairIdValid(test);\n\n        if (validated) {\n            pass = true;\n            pairId = test;\n        }\n    }\n\n    return pairId;\n};\n\nconst isPairIdValid = async (pairId) => {\n    const q = query(recordsRef, where('pairId', '==', pairId));\n    const querySnapshot = await getDocs(q);\n\n    if (querySnapshot.empty) {\n        return true;\n    } else return false;\n};\n\nconst getRandomPairId = () => {\n    return Math.floor(Math.random() * (9999 - 1000) + 1000).toString();\n};\n","/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Layout, Input, Button, message, Form, Typography } from 'antd';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\n\n// import Header from '../../components/Header';\nimport styles from './styles.module.scss';\nimport { ROUTE_PATH, ROLES } from '../../constants';\nimport { useStore } from '../../store';\nimport { SET_AUTH } from '../../store/actions';\nimport { auth } from '../../services/firebase';\n\nconst { Content } = Layout;\nconst { Title } = Typography;\n\nconst SignIn = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n    const { dispatch } = useStore();\n    const [loading, setLoading] = useState(false);\n\n    const login = async () => {\n        try {\n            setLoading(true);\n\n            const values = await form.validateFields();\n            console.log(values);\n\n            const userCredential = await signInWithEmailAndPassword(\n                auth,\n                values.email,\n                values.password,\n            );\n\n            const user = userCredential.user;\n            setLoading(false);\n            dispatch({\n                type: SET_AUTH,\n                payload: {\n                    isValid: true,\n                    roles: [ROLES.Admin],\n                },\n            });\n\n            goDashboard();\n        } catch (e) {\n            console.log(e);\n            console.log(e?.message);\n            setLoading(false);\n            message.error('');\n        }\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord, { replace: true });\n    };\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <Form\n                        {...formLayout}\n                        form={form}\n                        layout=\"horizontal\"\n                        autoComplete=\"off\"\n                    >\n                        <Form.Item\n                            label=\" \"\n                            colon={false}\n                            style={{ marginBottom: 12 }}\n                        >\n                            <Title level={2}>-</Title>\n                        </Form.Item>\n                        <Form.Item\n                            label=\"Email\"\n                            name=\"email\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: ' Email',\n                                },\n                            ]}\n                        >\n                            <Input placeholder=\"\" type=\"email\" />\n                        </Form.Item>\n                        <Form.Item\n                            label=\"Password\"\n                            name=\"password\"\n                            rules={[\n                                {\n                                    required: true,\n                                    message: ' Password',\n                                },\n                            ]}\n                        >\n                            <Input.Password placeholder=\"\" />\n                        </Form.Item>\n                        <Form.Item {...tailLayout}>\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                onClick={login}\n                                loading={loading}\n                            >\n                                \n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 7,\n    },\n    wrapperCol: {\n        span: 12,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 7,\n        span: 16,\n    },\n};\n\nexport default SignIn;\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    TeamOutlined,\n    SlidersOutlined,\n    ProfileOutlined,\n    RocketOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport addOnImg from '../../assets/images/right-arrow.png';\n\nconst AdminDashboard = () => {\n    const navigate = useNavigate();\n    // const { pathname } = useLocation();\n\n    const goUserList = () => {\n        navigate(ROUTE_PATH.user_list);\n    };\n\n    const goDifficulityList = () => {\n        navigate(ROUTE_PATH.difficulty_list);\n    };\n\n    const goRecordList = () => {\n        navigate(`${ROUTE_PATH.record_list}/123`);\n    };\n\n    const goPrepareWorkout = () => {\n        navigate(ROUTE_PATH.prepare_workout);\n        // navigate(ROUTE_PATH.prepare_workout, { replace: true }); // \n    };\n\n    return (\n        <div className={styles.container}>\n            <legend></legend>\n            <fieldset>\n                <TileWithIconAndAction\n                    icon={<TeamOutlined />}\n                    label=\"\"\n                    action={goUserList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<SlidersOutlined />}\n                    label=\"\"\n                    action={goDifficulityList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<ProfileOutlined />}\n                    label=\"\"\n                    action={goRecordList}\n                />\n\n                <TileWithIconAndAction\n                    icon={<RocketOutlined />}\n                    label=\"\"\n                    action={goPrepareWorkout}\n                />\n            </fieldset>\n        </div>\n    );\n};\n\nconst TileWithIconAndAction = ({ icon, label, action }) => (\n    <span className={styles.tile} onClick={action}>\n        <span\n            className={styles.addOn}\n            style={{ backgroundImage: `url(${addOnImg})` }}\n        ></span>\n        <span className={styles.tileIcon}>{icon}</span>\n        <span className={styles.tileLabel}>{label}</span>\n    </span>\n);\n\nexport default AdminDashboard;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAYAAAAj6qa3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAB3RJTUUH5gUPACMKwjZTZgAAAfBJREFUaN7tmDFLHEEYht9vPRRJc+lCtHDXI4V/ICmEQIo0IhbeIqIwe4USPLwmXQIGhAuBYHPdieEInN6pVRCSIm0qC0VCmsREUBELYykSb/dNEfYKg8jhruvgPM0UMwzf+8B8wwxgMBgMBoM29K24WQbt7YDrkm1tSddzbdgzao3M5520Inl66uS9DfL42P6tFsjh4aTri41Mafojg46OZnDH80gyHO26+kWenfUO5e6TIyOt7m8lHfAytguHFUijgTHZBE5Ozs/LC5kFUqlgNPgCVKutirjxAoDVVRHf5yw3gIkJvuYM0GhEJUKSjtcqdjFXZJDNojcYhdRqYfD/Fj6DDfg+v8su6Hk7C5V3YlWr2guIWoS2AqISIY6jSuTAAOfEB8pleY4toKsr6WBxEfYQ6y1swHXF/qZ+kHt7MihFoLs76QKvTcQaXwL7+xrcAjHxQKYB0rL6+RWYnAyNJF1X3DSPwCN+AgoF/Ztgj6cYuC7e8BVkaenSJviQGUCpncfvx0QWF7UVcNXg4bR2AqIKrp2A5qvvM54A9fpFwZtnvGb1A+PjPz9UDkSWly/aVwMB/979ztM7d4GjI2zjD5BOXzV4yI2/BjOlezkwlcI6y0BnZ1TBtcPe9ObJqalb9yFynlv7JWYwGAyGGPgL5etGn1vyhAgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDUtMTVUMDA6MzU6MTArMDA6MDBS2JlGAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTA1LTE1VDAwOjM1OjEwKzAwOjAwI4Uh+gAAAABJRU5ErkJggg==\"","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { ROUTE_PATH } from '../../constants/';\n\nimport styles from './styles.module.scss';\n\nconst Header = () => {\n    return (\n        <div className={styles.container}>\n            <Link to={ROUTE_PATH.admin_dashbaord}>Dashboard</Link>\n        </div>\n    );\n};\n\nexport default Header;\n","import React from 'react';\n\nimport Header from '../../components/Header';\nimport styles from './styles.module.scss';\n\nconst Missing = () => {\n    return (\n        <div className={styles.container}>\n            <Header />\n            <h1>!NOT FOUND!</h1>\n            <p>Sorry, the page you visited is not exist</p>\n        </div>\n    );\n};\n\nexport default Missing;\n","import React from 'react';\n\nimport Header from '../../components/Header';\nimport styles from './styles.module.scss';\n\nconst Unauthorized = () => {\n    return (\n        <div className={styles.container}>\n            <Header />\n            <p>Sorry, you are not authorized to view this page</p>\n        </div>\n    );\n};\n\nexport default Unauthorized;\n","import _ from 'underscore';\nimport React from 'react';\n\nclass Helper {\n    defaults(object, defaults) {\n        return _.defaults({ ...object }, defaults);\n    }\n    each(list, iteratee, context) {\n        if (list instanceof Set) {\n            let array = Array.from(list);\n            array.forEach((value, index, array) =>\n                iteratee.call(context, value, index, array),\n            );\n        } else {\n            _.each(list, iteratee, context);\n        }\n    }\n\n    map(list, iteratee, context) {\n        return _.map(list, iteratee, context);\n    }\n\n    mapObject(obj, iteratee, context) {\n        return _.mapObject(obj, iteratee, context);\n    }\n\n    reduce(list, iteratee, memo, context) {\n        return _.reduce(list, iteratee, memo, context);\n    }\n\n    every(list, iteratee, context) {\n        return _.every(list, iteratee, context);\n    }\n\n    some(list, iteratee, context) {\n        return _.some(list, iteratee, context);\n    }\n\n    find(list, predicate, context) {\n        let result = null;\n        if (list instanceof Map) {\n            for (const entry of list.entries()) {\n                let value = entry[1];\n                let key = entry[0];\n                let test = predicate.call(context, value, key, list);\n                if (test) {\n                    result = value;\n                    break;\n                }\n            }\n        } else {\n            result = _.find(list, predicate, context);\n        }\n        return result;\n    }\n\n    findIndex(list, predicate, context) {\n        return _.findIndex(list, predicate, context);\n    }\n\n    filter(list, predicate, context) {\n        return _.filter(list, predicate, context);\n    }\n\n    count(list, predicate, context) {\n        return this.filter(list, predicate, context).length;\n    }\n\n    max(list, iteratee, context) {\n        return _.max(list, iteratee, context);\n    }\n\n    min(list, iteratee, context) {\n        return _.min(list, iteratee, context);\n    }\n\n    toArray(any) {\n        if (this.isValid(any)) {\n            return _.isArray(any) ? any : [any];\n        } else {\n            return any;\n        }\n    }\n    first(array, n) {\n        return _.isEmpty(array) ? null : _.first(array, n);\n    }\n\n    last(array, n) {\n        return _.isEmpty(array) ? null : _.last(array, n);\n    }\n\n    has(object, key) {\n        return _.has(object, key);\n    }\n\n    values(object) {\n        return _.values(object);\n    }\n\n    isEqual(a, b) {\n        let test = true;\n        if (a instanceof File && b instanceof File) {\n            test = a.size === b.size;\n        } else if (this.isArray(a) && this.isArray(b)) {\n            for (let i = 0; i < Math.max(a.length, b.length); i++) {\n                if (a[i] !== b[i]) {\n                    test = false;\n                    break;\n                }\n            }\n        } else {\n            test = JSON.stringify(a) === JSON.stringify(b);\n        }\n        return test;\n    }\n    isEmpty(value) {\n        let test = false;\n        if (this.isNullOrUndefined(value)) {\n            test = true;\n        } else if (_.isString(value) || _.isArray(value)) {\n            test = value.length === 0;\n        } else if (!this.isPrimitive(value)) {\n            test = Object.entries(value).length === 0;\n        }\n        return test;\n    }\n    isNotEmpty(object) {\n        return !this.isEmpty(object);\n    }\n    isBoolean(object) {\n        return _.isBoolean(object);\n    }\n    isFalse(value) {\n        return value === false;\n    }\n    isTrue(value) {\n        return value === true;\n    }\n    isString(object) {\n        return _.isString(object);\n    }\n    isNumber(object) {\n        return _.isNumber(object);\n    }\n    isFunction(object) {\n        return _.isFunction(object);\n    }\n    isDate(object) {\n        return _.isDate(object);\n    }\n    isNull(...values) {\n        return values.every((value) => _.isNull(value));\n    }\n    isNotNull(...values) {\n        return values.every((value) => !_.isNull(value));\n    }\n    isUndefined(...values) {\n        return values.every((value) => _.isUndefined(value));\n    }\n    isNotUndefined(...values) {\n        return values.every((value) => !_.isUndefined(value));\n    }\n    isNullOrUndefined(...values) {\n        return values.every(\n            (value) => this.isNull(value) || this.isUndefined(value),\n        );\n    }\n    isNotNullOrUndefined(...values) {\n        return values.every((value) => !this.isNullOrUndefined(value));\n    }\n    isExisted(object) {\n        return !(object === null || object === undefined);\n    }\n    isNotExisted(object) {\n        return object === null || object === undefined;\n    }\n    isValid(object) {\n        return this.isExisted(object);\n    }\n    isNotValid(object) {\n        return this.isNotExisted(object);\n    }\n    isArray(object) {\n        return Array.isArray(object);\n    }\n    isObject(object) {\n        return _.isObject(object);\n    }\n    isInteger(object) {\n        return Number.isInteger(object);\n    }\n    isFinite(value) {\n        return Number.isFinite(value);\n    }\n    isFile(object) {\n        return object instanceof File;\n    }\n    isNaN(object) {\n        return _.isNaN(object);\n    }\n    isPrimitive(value) {\n        return (\n            this.isNumber(value) ||\n            this.isString(value) ||\n            this.isDate(value) ||\n            this.isBoolean(value) ||\n            this.isFile(value)\n        );\n    }\n    isJson(json) {\n        if (!_.isString(json)) return false;\n\n        try {\n            JSON.parse(json);\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n    isPojo(object) {\n        if (object == null || typeof object !== 'object') {\n            return false;\n        }\n        const proto = Object.getPrototypeOf(object);\n        if (proto == null) {\n            return true; // `Object.create(null)`\n        }\n        return proto === Object.prototype;\n    }\n    isElement(object) {\n        return React.isValidElement(object);\n    }\n}\n\nlet helper = new Helper();\n\nexport default helper;\n","export default function wait(ms, value) {\n    return new Promise((resolve) => setTimeout(resolve, ms, value));\n}\n","/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    addDoc,\n    collection,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    Timestamp,\n    getDocs,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Statistic,\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Select,\n    Divider,\n    Popover,\n    Spin,\n    Row,\n    Col,\n    Descriptions,\n    Typography,\n    Badge,\n} from 'antd';\nimport {\n    LoadingOutlined,\n    ExclamationCircleOutlined,\n    SettingOutlined,\n    ArrowRightOutlined,\n} from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH, VALID_MIN, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport {\n    usersRef,\n    difficultiesRef,\n    recordsRef,\n    generateValidPairId,\n    validateInputPairId,\n} from '../../services/firebase';\nimport wait from '../../util/wait';\n\nconst { Countdown } = Statistic;\nconst { Content } = Layout;\nconst { Option } = Select;\nconst { Text } = Typography;\n\nconst initialPacket = {\n    rpm: 0,\n    time: 0,\n    heartRate: 0,\n};\n\nlet unsubscribe = null;\n\nconst PrepareWorkout = () => {\n    const navigate = useNavigate();\n    const [form] = Form.useForm();\n\n    const [users, setUsers] = useState();\n    const [difficulties, setDifficulties] = useState([]);\n    const [isDone, setIsDone] = useState(false);\n\n    // store [id]\n    const [selectedUser, setSelectedUser] = useState();\n    const [selectedDiff, setSelectedDiff] = useState();\n\n    // [], []store data object\n    const [selectedUserData, setSelectedUserData] = useState();\n    const [selectedDiffData, setSelectedDiffData] = useState();\n    const [userModalVis, setUserModalVis] = useState(false);\n    const [diffModalVis, setDiffModalVis] = useState(false);\n\n    //\n    // \n    const [warnHRValues, setWarnHRValues] = useState([]);\n    //\n    //\n\n    const [isPairing, setIsPairing] = useState(false);\n\n    const [targetgetRecordId, setTargetRecordId] = useState();\n\n    const [pairId, setPairId] = useState(); // \n    const [isAppConnected, setIsAppConnected] = useState(false);\n    const [pairDeadline, setPairDeadline] = useState();\n\n    // for functionality testing\n    const [inputPairId, setInputPairId] = useState(''); // \n\n    useEffect(() => {\n        init();\n\n        return () => {\n            if (_.isFunction(unsubscribe)) unsubscribe();\n        };\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const difficulties = await fetchDiffs();\n\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n    };\n\n    useEffect(() => {\n        if (_.isEmpty(targetgetRecordId)) {\n            return;\n        }\n\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        unsubscribe = onSnapshot(targetRecordRef, async (doc) => {\n            const currData = doc.data();\n            if (currData?.pairId == null) {\n                // App  pairId  null\n                //  null\n                //  record  [isAppConnected]  true\n                if (currData?.isAppConnected == false) {\n                    await updateDoc(targetRecordRef, {\n                        isAppConnected: true,\n                    });\n\n                    setPairDeadline(null);\n                    setIsPairing(false);\n                    setIsAppConnected(true);\n                    message.success('');\n                }\n            }\n        });\n\n        // going to listen doc change!\n    }, [targetgetRecordId]);\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return users;\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const goDashboard = async () => {\n        if (targetgetRecordId) {\n            Modal.confirm({\n                title: '',\n                icon: <ExclamationCircleOutlined />,\n                content: '',\n                onOk: () => deleteRecord('leave'),\n            });\n        } else {\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n    };\n\n    const goMonitoring = () => {\n        navigate(`${ROUTE_PATH.monitoring_workout}/${targetgetRecordId}`, {\n            replace: true,\n        });\n    };\n\n    const confirmUserAndDiff = async () => {\n        // const valid = await form.validateFields();\n\n        // console.log(valid);\n\n        if (selectedUser == null || selectedDiff == null) {\n            Modal.error({\n                title: '...',\n                content: '',\n            });\n            return;\n        }\n\n        Modal.confirm({\n            title: '',\n            icon: <ExclamationCircleOutlined />,\n            content: '',\n            onOk: () => createRecord(),\n        });\n    };\n\n    const createRecord = async () => {\n        if (selectedUser == null || selectedDiff == null) {\n            return;\n        }\n\n        const theDiff = difficulties.find((d) => d.id === selectedDiff);\n\n        const targetHeartRate = theDiff.targetHeartRate; // careful the type\n        const upperLimitHeartRate = theDiff.upperLimitHeartRate; // careful the type\n        // constant\n        const user = selectedUser;\n        const difficulty = selectedDiff;\n        const pairId = await generateValidPairId();\n        const isAppConnected = false;\n        const createdTime = Timestamp.now();\n        const beginWorkoutTime = null;\n        const finishedWorkoutTime = null;\n\n        const targetRecordRef = await addDoc(recordsRef, {\n            targetHeartRate,\n            upperLimitHeartRate,\n            pairId,\n            isAppConnected,\n            user,\n            createdTime,\n            beginWorkoutTime,\n            finishedWorkoutTime,\n            difficulty,\n        });\n        console.log('Document written with ID: ', targetRecordRef.id);\n\n        // initialize sub collection - packets\n        await addDoc(\n            collection(recordsRef, targetRecordRef.id, 'packets'),\n            initialPacket,\n        );\n\n        setTargetRecordId(targetRecordRef.id);\n        setPairId(pairId);\n\n        // start a count-down\n        const deadline = Date.now() + 1000 * 60 * VALID_MIN;\n        setPairDeadline(deadline);\n\n        message.info({ content: '' }, 5);\n\n        // targetHeartRate\n        // upperLimitHeartRate\n        // pairId\n        // isAppConnected\n        // user\n        // beginWorkoutTime\n        // finishedWorkoutTime\n        // createdTime\n        // difficulty\n    };\n\n    const deleteRecord = async (leave = false) => {\n        const targetRecordRef = doc(recordsRef, targetgetRecordId);\n        await deleteDoc(targetRecordRef);\n        if (leave) navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    // for functionality testing\n    const pairWithApp = async () => {\n        setIsPairing(true);\n\n        const theRecordId = await validateInputPairId(inputPairId);\n\n        if (!theRecordId) {\n            alert('');\n            setIsPairing(false);\n            setIsAppConnected(false);\n            return;\n        }\n\n        // update the isAppConnected Field!\n        const targetRecordRef = doc(recordsRef, theRecordId);\n        await wait(1500);\n        await updateDoc(targetRecordRef, {\n            pairId: null,\n        });\n    };\n\n    const onDeadlineExpired = async () => {\n        message.warn('', 3);\n\n        await wait(1000);\n        await deleteRecord();\n        setTargetRecordId(null);\n        setPairId(null);\n        setSelectedUser();\n        setSelectedDiff();\n        setPairDeadline(null);\n        setInputPairId(null);\n        form.resetFields();\n    };\n\n    const onUserChange = (value) => setSelectedUser(value);\n    const onDiffChange = (value) => setSelectedDiff(value);\n\n    const openUserModal = () => {\n        const selectedUserData = users.find((u) => u.id === selectedUser);\n\n        setUserModalVis(true);\n        setSelectedUserData(selectedUserData);\n    };\n    const openDiffModal = () => {\n        const selectedDiffData = difficulties.find(\n            (d) => d.id === selectedDiff,\n        );\n        const warnHRValues = getExactThresholdValue(\n            selectedDiffData.upperLimitHeartRate,\n        );\n\n        setDiffModalVis(true);\n        setSelectedDiffData(selectedDiffData);\n        setWarnHRValues(warnHRValues);\n    };\n    const closeUserModal = () => {\n        setUserModalVis(false);\n        setSelectedUserData();\n    };\n    const closeDiffModal = () => {\n        setDiffModalVis(false);\n        setSelectedDiffData();\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    const simulateAppCotent = (\n        <div className={styles.pairing}>\n            <Input.Search\n                placeholder=\"\"\n                allowClear\n                value={inputPairId}\n                onChange={(e) => setInputPairId(e.target.value)}\n                onSearch={pairWithApp}\n                disabled={isAppConnected}\n                loading={isPairing}\n            />\n            {/* <Button onClick={pairWithApp} disabled={isAppConnected}>\n                \n            </Button> */}\n        </div>\n    );\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"\"\n                        subTitle=\"\"\n                        onBack={goDashboard}\n                    />\n\n                    <Form {...formLayout} form={form} style={{ marginTop: 36 }}>\n                        <Form.Item\n                            name=\"user\"\n                            label=\"\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"\"\n                                        onChange={onUserChange}\n                                        disabled={pairId}\n                                    >\n                                        {users.map((user) => (\n                                            <Option\n                                                value={user.id}\n                                                key={user.id}\n                                            >\n                                                {user.name}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedUser}\n                                        onClick={openUserModal}\n                                    >\n                                        \n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item\n                            name=\"difficulty\"\n                            label=\"\"\n                            // rules={[\n                            //     {\n                            //         required: true,\n                            //         message: '',\n                            //     },\n                            // ]}\n                        >\n                            <Row gutter={8}>\n                                <Col span={18}>\n                                    <Select\n                                        placeholder=\"\"\n                                        onChange={onDiffChange}\n                                        disabled={pairId}\n                                    >\n                                        {difficulties.map((diff) => (\n                                            <Option\n                                                value={diff.id}\n                                                key={diff.id}\n                                            >\n                                                {diff.name}\n                                                {diff.targetWorkoutTime}{' '}\n                                                {' '}\n                                                {diff.targetHeartRate} BPM\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Col>\n                                <Col span={6}>\n                                    <Button\n                                        disabled={!selectedDiff}\n                                        onClick={openDiffModal}\n                                    >\n                                        \n                                    </Button>\n                                </Col>\n                            </Row>\n                        </Form.Item>\n                        <Form.Item {...tailLayout}>\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                onClick={confirmUserAndDiff}\n                                disabled={pairId}\n                            >\n                                \n                            </Button>\n                        </Form.Item>\n                    </Form>\n\n                    <Modal\n                        title=\"\"\n                        visible={userModalVis}\n                        onCancel={closeUserModal}\n                        footer={null} // no [Ok], [Cancel] button\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"\" span={3}>\n                                {selectedUserData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={3}>\n                                {selectedUserData?.age}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={3}>\n                                {selectedUserData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    <Modal\n                        title=\"\"\n                        visible={diffModalVis}\n                        onCancel={closeDiffModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={600}\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                            column={2}\n                        >\n                            <Descriptions.Item label=\"\" span={1}>\n                                {selectedDiffData?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={1}>\n                                {selectedDiffData?.targetWorkoutTime} \n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={2}>\n                                {selectedDiffData?.targetHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={2}>\n                                {selectedDiffData?.upperLimitHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item\n                                label={\n                                    <>\n                                        \n                                        <br />\n                                        <Text\n                                            type=\"secondary\"\n                                            style={{\n                                                fontSize: '0.8em',\n                                            }}\n                                        >\n                                            \n                                        </Text>\n                                    </>\n                                }\n                                span={2}\n                            >\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={2}>\n                                {selectedDiffData?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n\n                    {pairId && (\n                        <>\n                            <Divider\n                                dashed={true}\n                                style={{\n                                    minWidth: '90%',\n                                    width: '90%',\n                                    borderWidth: '2px',\n                                    margin: 'auto',\n                                    marginRight: 'auto',\n                                    marginTop: '4em',\n                                    marginBottom: '4em',\n                                }}\n                            />\n                            <Form {...formLayout}>\n                                <Form.Item\n                                    label={\n                                        <>\n                                            \n                                            <Popover\n                                                content={simulateAppCotent}\n                                                placement=\"bottomRight\"\n                                                title=\"\"\n                                                trigger=\"click\"\n                                            >\n                                                <SettingOutlined\n                                                    width={'1em'}\n                                                />\n                                            </Popover>\n                                        </>\n                                    }\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                >\n                                    <div className={styles.pairIdWrapper}>\n                                        {pairId.split('').map((c, i) => (\n                                            <pre key={c + i}>{c}</pre>\n                                        ))}\n\n                                        {/* <Countdown\n                                            title=\"\"\n                                            value={Date.now() + 1000 * 60 * 10}\n                                            onFinish={onDeadlineExpired}\n                                        /> */}\n                                        {pairDeadline && (\n                                            <Countdown\n                                                title=\"\"\n                                                value={pairDeadline}\n                                                onFinish={onDeadlineExpired}\n                                            />\n                                        )}\n                                    </div>\n                                </Form.Item>\n                                {!isAppConnected && (\n                                    <Form.Item\n                                        label=\" \"\n                                        colon={false}\n                                        style={{ marginTop: '3em' }}\n                                    >\n                                        <Spin\n                                            indicator={\n                                                <LoadingOutlined\n                                                    style={{\n                                                        fontSize: 24,\n                                                        marginRight: '1em',\n                                                    }}\n                                                    spin\n                                                />\n                                            }\n                                        />\n                                        ...\n                                    </Form.Item>\n                                )}\n\n                                <Form.Item\n                                    label=\" \"\n                                    colon={false}\n                                    style={{ marginTop: '5em' }}\n                                >\n                                    <Button\n                                        onClick={goMonitoring}\n                                        type={\n                                            isAppConnected\n                                                ? 'primary'\n                                                : 'dashed'\n                                        }\n                                        disabled={!isAppConnected}\n                                        icon={\n                                            isAppConnected && (\n                                                <ArrowRightOutlined />\n                                            )\n                                        }\n                                        size=\"large\"\n                                    >\n                                        \n                                    </Button>\n                                </Form.Item>\n                            </Form>\n                        </>\n                    )}\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            {phase}{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                 {overVal}\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        span: 8,\n    },\n    wrapperCol: {\n        span: 10,\n    },\n};\n\nconst tailLayout = {\n    wrapperCol: {\n        offset: 8,\n        span: 16,\n    },\n};\n\nexport default PrepareWorkout;\n","export default __webpack_public_path__ + \"static/media/warn-slight.5b9ecb19.wav\";","export default __webpack_public_path__ + \"static/media/warn-medium.44c98622.wav\";","export default __webpack_public_path__ + \"static/media/warn-high.ae9bf97e.wav\";","export default __webpack_public_path__ + \"static/media/notification.3047fa24.wav\";","export default __webpack_public_path__ + \"static/media/goal-archieved.105e220c.wav\";","import { useState } from 'react';\nimport { WARN } from '../constants/index';\nimport warn_slight_url from '../assets/sounds/warn-slight.wav';\nimport warn_medium_url from '../assets/sounds/warn-medium.wav';\nimport warn_high_url from '../assets/sounds/warn-high.wav';\nimport other_notification_url from '../assets/sounds/notification.wav';\nimport other_archieved_url from '../assets/sounds/goal-archieved.wav';\n\nconst OTHER_SOUND = {\n    Notification: 'notification',\n    Archieved: 'goal-archieved',\n};\n\n// To Address Safari on iPad issue:\n// Checkout: https://stackoverflow.com/questions/31776548/why-cant-javascript-play-audio-files-on-iphone-safari\n// ======>> \"iOS disables autoplay, instead requiring that\n//            play be initiated as part of a user interaction\n//           (e.g., you can start playback within a touchstart listener).\"\n// ======>>  Audio \nconst useAudio = () => {\n    const [audioPlayer] = useState(new Audio(other_notification_url));\n\n    const getAudioPermission = () => {\n        audioPlayer.play();\n    };\n\n    const playWarnSound = (warn) => {\n        switch (warn) {\n            case WARN.Slight:\n                audioPlayer.src = warn_slight_url;\n                audioPlayer.play();\n                break;\n            case WARN.Medium:\n                audioPlayer.src = warn_medium_url;\n                audioPlayer.play();\n                break;\n            case WARN.High:\n                audioPlayer.src = warn_high_url;\n                audioPlayer.play();\n                break;\n        }\n    };\n\n    const playOtherSound = (sound) => {\n        switch (sound) {\n            case OTHER_SOUND.Archieved:\n                audioPlayer.src = other_archieved_url;\n                audioPlayer.play();\n                break;\n            case OTHER_SOUND.Notification:\n                audioPlayer.play();\n                break;\n        }\n    };\n\n    return { getAudioPermission, playWarnSound, playOtherSound, OTHER_SOUND };\n};\n\nexport default useAudio;\n","const formatSeconds = (input) => {\n    const sec_num = parseInt(input, 10);\n    const hours = Math.floor(sec_num / 3600);\n    const minutes = Math.floor((sec_num - hours * 3600) / 60);\n    const seconds = sec_num - hours * 3600 - minutes * 60;\n\n    let formatted = '';\n    if (hours != 0) formatted += `${hours} `;\n    if (minutes != 0) formatted += `${minutes} `;\n    if (seconds != 0) formatted += `${seconds}`;\n\n    return formatted;\n};\n\nexport default formatSeconds;\n","const configLineChart = (data, targetHeartRate) => ({\n    data: [data, data],\n    xField: 'timeLabel',\n    yField: ['rpm', 'heartRate'],\n    yAxis: {\n        rpm: {\n            title: {\n                text: 'RPM',\n            },\n        },\n        heartRate: {\n            title: {\n                text: '',\n            },\n        },\n    },\n    // xAxis: {\n    //     title: {\n    //         text: '',\n    //     },\n    // },\n    legend: {\n        itemName: {\n            formatter: (text, item) => {\n                return item.value === 'rpm' ? 'RPM' : '';\n            },\n        },\n    },\n    meta: {\n        rpm: {\n            alias: 'RPM ',\n            formatter: (value) => {\n                return `${value} RPM`;\n            },\n        },\n        heartRate: {\n            alias: '',\n            formatter: (value) => {\n                return `${value} BPM`;\n                // return Number((v / 100).toFixed(1));\n            },\n        },\n    },\n    geometryOptions: [\n        {\n            geometry: 'line',\n            color: '#5B8FF9',\n            lineStyle: {\n                lineWidth: 2,\n                lineDash: [5, 5],\n            },\n        },\n        {\n            geometry: 'line',\n            color: '#5AD8A6',\n            smooth: true,\n            lineStyle: {\n                lineWidth: 4,\n                opacity: 0.5,\n            },\n            point: {\n                shape: 'circle',\n                size: 4,\n                style: {\n                    opacity: 0.5,\n                    stroke: '#5AD8A6',\n                    fill: '#fff',\n                },\n            },\n        },\n    ],\n    annotations: {\n        heartRate: [\n            {\n                type: 'line',\n                start: ['min', targetHeartRate], // TODO: change [138] to \n                end: ['max', targetHeartRate], // TODO: change [138] to \n                style: {\n                    lineWidth: 2,\n                    lineDash: [3, 3],\n                    stroke: '#F4664A',\n                },\n                text: {\n                    content: `(${targetHeartRate})`, // TODO: change [138] to \n                    offsetY: -4,\n                    position: 'end',\n                    style: {\n                        textAlign: 'end',\n                    },\n                },\n            },\n        ],\n    },\n    tooltip: {\n        showTitle: true,\n    },\n});\n\nexport default configLineChart;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './styles.module.scss';\n\nconst StopWatch = ({ start, initialValue }) => {\n    const [time, setTime] = useState(initialValue);\n    const [miliDisplay, setMiliDisplay] = useState(0);\n\n    useEffect(() => {\n        let interval = null;\n        let displayInterval = null;\n\n        if (start) {\n            interval = setInterval(() => {\n                setTime((time) => time + 10);\n            }, 10);\n\n            displayInterval = setInterval(() => {\n                setMiliDisplay((miliDisplay) => {\n                    if (miliDisplay + 10 > 1000) return 0;\n                    else return miliDisplay + 10;\n                });\n            }, 10);\n        } else {\n            clearInterval(interval);\n            clearInterval(displayInterval);\n        }\n\n        return () => {\n            clearInterval(interval);\n            clearInterval(displayInterval);\n        };\n    }, [start]);\n\n    return (\n        <div className={styles.container}>\n            <span className=\"digits\">\n                {('0' + Math.floor(time / 3600000)).slice(-2)}:\n            </span>\n            <span className=\"digits\">\n                {('0' + Math.floor((time / 60000) % 60)).slice(-2)}:\n            </span>\n            <span className=\"digits\">\n                {('0' + Math.floor((time / 1000) % 60)).slice(-2)}.\n            </span>\n            <span className=\"digits mili-sec\">\n                {('0' + ((miliDisplay / 10) % 100)).slice(-2)}\n            </span>\n        </div>\n    );\n};\n\nStopWatch.propTypes = {\n    start: PropTypes.bool,\n    initialValue: PropTypes.number,\n};\n\nexport default StopWatch;\n","/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    onSnapshot,\n    collection,\n    addDoc,\n    doc,\n    updateDoc,\n    Timestamp,\n    getDoc,\n} from 'firebase/firestore';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport { Modal, Popover, Button, Input, message, notification } from 'antd';\nimport {\n    SettingOutlined,\n    ExclamationCircleOutlined,\n    SmileOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH, WARN, WARN_THRESHOLD } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\nimport wait from '../../util/wait';\nimport useAudio from '../../util/useAudio';\nimport formatWithMoment from '../../util/formatSeconds';\nimport configLineChart from '../../util/configLineChart';\n\nimport StopWatch from '../../components/StopWatch';\n\nlet unsubscribeRecord = null;\nlet unsubscribePackets = null;\n\nconst MonitoringWorkout = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const [record, setRecord] = useState();\n    const [user, setUser] = useState();\n    const [difficulty, setDifficulty] = useState();\n    const [packets, setPackets] = useState([]);\n\n    const [isInitRecordDone, setIsInitRecordDone] = useState(false);\n    const [isInitPacketsDone, setIsInitPacketsDone] = useState(false);\n\n    const {\n        playWarnSound,\n        playOtherSound,\n        OTHER_SOUND,\n        getAudioPermission,\n    } = useAudio();\n\n    // \n    const [beginStopWatch, setBeginStopWatch] = useState(false);\n\n    // for prototype\n    const [nextHeartRateVal, setNextHeartRateVal] = useState('');\n\n    useEffect(() => {\n        init();\n        grantAudioPerssion();\n\n        return () => {\n            if (_.isFunction(unsubscribeRecord)) unsubscribeRecord();\n            if (_.isFunction(unsubscribePackets)) unsubscribePackets();\n        };\n    }, []);\n\n    useEffect(() => {\n        if (_.isEmpty(record?.beginWorkoutTime)) return;\n\n        const begin = record.beginWorkoutTime;\n        const end = record.finishedWorkoutTime;\n\n        if (_.isNotEmpty(begin)) setBeginStopWatch(true);\n        if (_.isNotEmpty(end)) setBeginStopWatch(false);\n    }, [record]);\n\n    useEffect(() => {\n        if (_.isEmpty(record)) return;\n        if (!isInitRecordDone || !isInitPacketsDone) return;\n\n        evaluateCurrPacket(packets[packets.length - 1]);\n    }, [packets]);\n\n    const init = async () => {\n        checkIntegrity();\n        listenRecordChange();\n        listenPacketsChange();\n    };\n\n    const grantAudioPerssion = () => {\n        Modal.info({\n            title: '',\n            // content: <button onClick={getAudioPermission}>;</button>,\n            onOk() {\n                getAudioPermission();\n            },\n            maskClosable: false,\n        });\n    };\n\n    const formatBeginWorkoutTime = () => {\n        if (_.isEmpty(record.beginWorkoutTime)) {\n            return '';\n        }\n\n        return moment(record.beginWorkoutTime).format('YYYY/MM/DD HH:mm');\n    };\n\n    const checkIntegrity = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        const recordSnapshot = await getDoc(recordRef);\n        const recordData = recordSnapshot.data();\n        // check if a valid record\n        if (recordData.finishedWorkoutTime != null) {\n            alert('');\n            navigate(ROUTE_PATH.admin_dashbaord);\n        }\n\n        // user\n        const userRef = doc(usersRef, recordData.user);\n        const userSnapshot = await getDoc(userRef);\n        const user = userSnapshot.data();\n\n        // difficulty\n        const difficultyRef = doc(difficultiesRef, recordData.difficulty);\n        const diffSnapshot = await getDoc(difficultyRef);\n        const difficulty = diffSnapshot.data();\n\n        setUser(user);\n        setDifficulty(difficulty);\n    };\n\n    const listenRecordChange = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        unsubscribeRecord = onSnapshot(recordRef, async (recordSnapshot) => {\n            const recordData = recordSnapshot.data();\n            const record = {\n                ...recordData,\n                beginWorkoutTime: recordData.beginWorkoutTime?.toDate(),\n            };\n\n            setRecord(record);\n            setIsInitRecordDone(true);\n        });\n    };\n\n    const listenPacketsChange = () => {\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        unsubscribePackets = onSnapshot(packetsRef, (querySnapshot) => {\n            if (querySnapshot.empty) {\n                alert('');\n                navigate(ROUTE_PATH.prepare_workout, { replace: true });\n                return;\n            }\n            const newPackets = [];\n            querySnapshot.forEach((doc) => {\n                newPackets.push({\n                    ...doc.data(),\n                    timeLabel: formatWithMoment(doc.data().time),\n                });\n            });\n\n            newPackets.sort((a, b) => a.time - b.time);\n            newPackets.splice(0, 1);\n\n            setPackets(newPackets);\n            setIsInitPacketsDone(true);\n        });\n    };\n\n    const evaluateCurrPacket = (packet) => {\n        const targetHeartRate = record.targetHeartRate;\n        const [overSlight, overMedium, overHigh] = getExactThresholdValue();\n\n        console.log(packet);\n\n        if (packet.heartRate >= overHigh) {\n            console.log('playing: high warn');\n            playWarnSound(WARN.High);\n            sendNotification(WARN.High, packet.heartRate);\n        } else if (\n            packet.heartRate < overHigh &&\n            packet.heartRate >= overMedium\n        ) {\n            console.log('playing: medium warn');\n            playWarnSound(WARN.Medium);\n            sendNotification(WARN.Medium, packet.heartRate);\n        } else if (\n            packet.heartRate < overMedium &&\n            packet.heartRate >= overSlight\n        ) {\n            console.log('playing: slight warn');\n            playWarnSound(WARN.Slight);\n            sendNotification(WARN.Slight, packet.heartRate);\n        } else if (\n            packet.heartRate >= targetHeartRate &&\n            packet.heartRate < overSlight\n        ) {\n            console.log('playing: archieved');\n            playOtherSound(OTHER_SOUND.Archieved);\n            sendNotification('Archieved', packet.heartRate, targetHeartRate);\n        }\n    };\n\n    const getExactThresholdValue = () => {\n        const upperLimitHeartRate = record.upperLimitHeartRate;\n\n        const calBase = upperLimitHeartRate / 100;\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    // for prototype testing\n    const addRpmAndHeartRate = async () => {\n        // set the begin time\n        const recordRef = doc(recordsRef, params.recordId);\n        const recordSnapshot = await getDoc(recordRef);\n        const record = recordSnapshot.data();\n        if (record.beginWorkoutTime == null) {\n            await updateDoc(recordRef, {\n                beginWorkoutTime: Timestamp.now(),\n            });\n        }\n\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        const time = (packets.length + 1) * 5;\n        const heartRate = _.isNotEmpty(nextHeartRateVal)\n            ? parseInt(nextHeartRateVal)\n            : 95 + packets.length;\n\n        // simulate incoming rpm & heart rate\n        const rpm = 30;\n        const nextPacket = {\n            time,\n            rpm: rpm + packets.length,\n            heartRate: heartRate,\n        };\n\n        await addDoc(packetsRef, nextPacket);\n    };\n\n    const confirmFinish = () => {\n        Modal.confirm({\n            title: '',\n            icon: <ExclamationCircleOutlined />,\n            content: '',\n            onOk: () => goFinishWorkout(),\n        });\n    };\n\n    const goFinishWorkout = async () => {\n        setBeginStopWatch(false);\n\n        await wait(2000);\n        const recordRef = doc(recordsRef, params.recordId);\n        await updateDoc(recordRef, {\n            finishedWorkoutTime: Timestamp.now(),\n            pairId: null,\n        });\n\n        message.success({ content: '' });\n\n        await wait(1000);\n        navigate(`${ROUTE_PATH.finsished_workout}/${params.recordId}`, {\n            replace: true,\n        });\n    };\n\n    const getStopWatchInitialValue = () => {\n        if (_.isEmpty(record?.beginWorkoutTime)) {\n            return 0;\n        }\n\n        const begin = moment(record.beginWorkoutTime);\n        const now = moment();\n        const accumlated = moment.duration(now.diff(begin)).asMilliseconds();\n\n        return accumlated;\n    };\n\n    // \n    const sendNotification = (warn, heartRate, targetHeartRate) => {\n        if (warn === WARN.High) {\n            // high warn\n            notification.warn({\n                message: '',\n                description: `${heartRate} BPM`,\n            });\n        } else if (warn === WARN.Medium) {\n            // medium warn\n            notification.info({\n                message: '',\n                description: `${heartRate} BPM`,\n            });\n        } else if (warn === WARN.Slight) {\n            // slight warn\n            notification.open({\n                message: '',\n                description: `${heartRate} BPM`,\n                icon: <SmileOutlined style={{ color: '#108ee9' }} />,\n            });\n        } else {\n            // archived\n            notification.success({\n                message: '',\n                description: `${targetHeartRate} BPM${heartRate} BPM`,\n            });\n        }\n    };\n\n    if (!isInitRecordDone || !isInitPacketsDone || _.isEmpty(difficulty)) {\n        return <div className={styles.container}>...</div>;\n    }\n\n    const popoverContent = (\n        <>\n            <Input.Search\n                placeholder=\"\"\n                allowClear\n                enterButton=\"\"\n                size=\"Large\"\n                onChange={(e) => setNextHeartRateVal(e.target.value)}\n                onSearch={addRpmAndHeartRate}\n            />\n            <Button onClick={confirmFinish}></Button>\n        </>\n    );\n\n    console.log(record.targetHeartRate);\n\n    // TODO:\n    // refactoring <table> to component\n    return (\n        <div className={styles.container}>\n            <div className={styles.glass}>\n                {/* <h1></h1> */}\n                <div className={`${styles.col} ${styles.col1}`}>\n                    <span>{user?.name}</span>\n                    <span>{user?.age}</span>\n                </div>\n                <div className={`${styles.col} ${styles.col2}`}>\n                    <div className={styles.stopWatchWrapper}>\n                        <span></span>\n                        <StopWatch\n                            start={beginStopWatch}\n                            initialValue={getStopWatchInitialValue()}\n                        />\n                    </div>\n                    <caption>( {formatBeginWorkoutTime()})</caption>\n                </div>\n                <div className={`${styles.col} ${styles.col3}`}>\n                    \n                </div>\n                <div className={`${styles.col} ${styles.difficulty}`}>\n                    <Popover\n                        content={popoverContent}\n                        placement=\"bottomRight\"\n                        title=\"\"\n                        trigger=\"click\"\n                    >\n                        <SettingOutlined width={'1em'} />\n                    </Popover>\n                    <span>{difficulty.name}</span>\n                    <span>{difficulty.targetHeartRate}</span>\n                    <span>{difficulty.upperLimitHeartRate}</span>\n                    <caption>\n                        {getExactThresholdValue()[0]}/\n                        {getExactThresholdValue()[1]}/\n                        {getExactThresholdValue()[2]}\n                    </caption>\n                </div>\n                <div className={styles.mainCol}>\n                    <LineChart\n                        {...configLineChart(packets, record.targetHeartRate)}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default MonitoringWorkout;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Space,\n    Descriptions,\n    InputNumber,\n    Popover,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    SearchOutlined,\n    CloseCircleFilled,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport { usersRef } from '../../services/firebase';\n\nconst { Content } = Layout;\n\nconst UserList = () => {\n    const navigate = useNavigate();\n    const [users, setUsers] = useState([]); // \n    const [filteredUser, setFilteredUser] = useState([]); // \n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n\n    const [currUser, setCurrUser] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal  [OK]  loading\n\n    // forms\n    const [searchForm] = Form.useForm();\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchUsers();\n        setIsDone(true);\n    };\n\n    const fetchUsers = async () => {\n        const q = query(usersRef, where('isDeleted', '!=', true));\n\n        const users = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            users.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        setUsers(users);\n        setFilteredUser(users);\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n        const filteredUser = users.filter((u) => u.name.includes(values.name));\n\n        searchBarRef.current.blur();\n\n        setFilteredUser(filteredUser);\n    };\n\n    const onCreateUser = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            setLoading(true);\n            await addDoc(usersRef, {\n                name: values.name,\n                age: values.age,\n                note: values.note ?? null,\n                isDeleted: false,\n            });\n\n            await fetchUsers();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(``);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n            message.error(e?.message);\n        }\n    };\n\n    const onPatchUser = async () => {\n        try {\n            const values = await editForm.validateFields();\n            // if pass\n            // [values] would be: {age: 12}\n\n            setLoading(true);\n            const currUserRef = doc(usersRef, currUser.id);\n            await updateDoc(currUserRef, {\n                age: values.age,\n                note: values.note,\n            });\n\n            await fetchUsers();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(``);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onDeleteUser = (id) => {\n        const theUser = users.find((u) => u.id === id);\n\n        Modal.confirm({\n            title: `${theUser.name}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '',\n            okText: '',\n            okType: 'danger',\n            cancelText: '',\n            onOk: () => deleteUser(id),\n        });\n    };\n\n    const deleteUser = async (id) => {\n        const theUserRef = doc(usersRef, id);\n        await updateDoc(theUserRef, {\n            isDeleted: true,\n        });\n\n        await fetchUsers();\n\n        message.info('');\n    };\n\n    const onViewCurrUserRecord = () => {\n        navigate(`${ROUTE_PATH.record_list}/${currUser.id}`);\n    };\n\n    const openViewModal = (id) => {\n        const currUser = users.find((u) => u.id === id);\n        setCurrUser(currUser);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currUser = users.find((u) => u.id === id);\n\n        editForm.setFieldsValue({\n            age: currUser.age,\n            name: currUser.name,\n            note: currUser.note,\n        });\n\n        setCurrUser(currUser);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrUser();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrUser();\n        closeAllModals();\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"\"\n                        subTitle=\"\"\n                        onBack={goDashboard}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                \n                            </Button>,\n                        ]}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={16}>\n                                <Form.Item label=\"\" name=\"name\">\n                                    <Input\n                                        placeholder=\"\"\n                                        allowClear={{\n                                            clearIcon: (\n                                                <CloseCircleFilled\n                                                    onClick={onSearch}\n                                                    style={{\n                                                        color: '#00000040',\n                                                    }}\n                                                />\n                                            ),\n                                        }}\n                                        ref={searchBarRef}\n                                    />\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        \n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteUser,\n                        )}\n                        dataSource={filteredUser}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                        >\n                            <Descriptions.Item label=\"\" span={3}>\n                                {currUser?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={3}>\n                                {currUser?.age}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={3}>\n                                {currUser?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                        <Button\n                            type=\"primary\"\n                            onClick={onViewCurrUserRecord}\n                            style={{ marginLeft: '24px' }}\n                        >\n                             {currUser?.name} \n                        </Button>\n                    </Modal>\n                    {/*  Modal */}\n                    <Modal\n                        title=\"\"\n                        visible={createModalVisible}\n                        onOk={onCreateUser}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item\n                                label=\"\"\n                                name=\"name\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"\"\n                                name=\"age\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={99}\n                                    addonAfter={''}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"\"\n                        visible={editModalVisible}\n                        onOk={onPatchUser}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                        >\n                            <Form.Item label=\"\">\n                                {currUser?.name}\n                            </Form.Item>\n                            <Form.Item\n                                label=\"\"\n                                name=\"age\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={99}\n                                    addonAfter={''}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal, openEditModal, onDeleteUser) => [\n    {\n        key: 'name',\n        title: '',\n        dataIndex: 'name',\n    },\n    {\n        key: 'age',\n        title: '',\n        dataIndex: 'age',\n        sorter: {\n            compare: (a, b) => a.age - b.age,\n        },\n        width: 200,\n    },\n    {\n        key: 'id',\n        title: ' ',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                \n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                \n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteUser(id)}\n                            >\n                                \n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 10,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 6,\n        offset: 2,\n    },\n    wrapperCol: {\n        span: 14,\n    },\n};\n\nexport default UserList;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n    getDocs,\n    updateDoc,\n    doc,\n    addDoc,\n    query,\n    where,\n} from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Space,\n    Descriptions,\n    InputNumber,\n    Popover,\n    Badge,\n    Typography,\n} from 'antd';\nimport {\n    PlusOutlined,\n    MoreOutlined,\n    SearchOutlined,\n    CloseCircleFilled,\n    ExclamationCircleOutlined,\n} from '@ant-design/icons';\n\nimport { ROUTE_PATH, WARN_THRESHOLD, WARN } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\n\nimport { difficultiesRef } from '../../services/firebase';\n\nconst { Content } = Layout;\nconst { Text } = Typography;\n\nconst DifficulityList = () => {\n    const navigate = useNavigate();\n    const [difficulties, setDifficulties] = useState([]); // \n    const [filteredDiffs, setFilteredDiffs] = useState([]); // \n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n\n    const [currDiff, setCurrDiff] = useState(); // used by: edit, view\n    const [loading, setLoading] = useState(false); // Modal  [OK]  loading\n\n    // \n    const [warnHRValues, setWarnHRValues] = useState([]);\n\n    // forms\n    const [searchForm] = Form.useForm();\n    const [editForm] = Form.useForm();\n    const [createForm] = Form.useForm();\n\n    // forms changed\n    // \n    const [createFormChange, setCreateFormChange] = useState();\n    const [editFormChange, setEditFormChange] = useState();\n\n    // modals\n    const [createModalVisible, setCreateModalVisible] = useState();\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n    const [editModalVisible, setEditModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        await fetchDiffs();\n        setIsDone(true);\n    };\n\n    const fetchDiffs = async () => {\n        const q = query(difficultiesRef, where('isDeleted', '!=', true));\n\n        const difficulties = [];\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        setDifficulties(difficulties);\n        setFilteredDiffs(difficulties);\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n        const filteredDiffs = difficulties.filter((d) =>\n            d.name.includes(values.name),\n        );\n\n        searchBarRef.current.blur();\n\n        setFilteredDiffs(filteredDiffs);\n    };\n\n    const onCreateDiff = async () => {\n        try {\n            const values = await createForm.validateFields();\n\n            setLoading(true);\n            await addDoc(difficultiesRef, {\n                name: values.name,\n                targetHeartRate: values.targetHeartRate,\n                targetWorkoutTime: values.targetWorkoutTime,\n                upperLimitHeartRate: values.upperLimitHeartRate,\n                note: values.note ?? null,\n                isDeleted: false,\n            });\n\n            await fetchDiffs();\n            setLoading(false);\n            closeAllModals();\n            createForm.resetFields();\n\n            message.success(``);\n        } catch (e) {\n            console.log(e);\n            setLoading(false);\n        }\n    };\n\n    const onPatchDiff = async () => {\n        try {\n            const values = await editForm.validateFields();\n            // if pass\n            // [values] would be: {age: 12}\n\n            setLoading(true);\n            const currUserRef = doc(difficultiesRef, currDiff.id);\n            await updateDoc(currUserRef, {\n                // \n                targetHeartRate: values.targetHeartRate,\n                targetWorkoutTime: values.targetWorkoutTime,\n                upperLimitHeartRate: values.upperLimitHeartRate,\n                note: values.note,\n            });\n\n            await fetchDiffs();\n            setLoading(false);\n            closeAllModals();\n\n            message.success(``);\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    const onDeleteDiff = (id) => {\n        const theDiff = difficulties.find((d) => d.id === id);\n\n        Modal.confirm({\n            title: `${theDiff.name}`,\n            icon: <ExclamationCircleOutlined />,\n            content: '',\n            okText: '',\n            okType: 'danger',\n            cancelText: '',\n            onOk: () => deleteDiff(id),\n        });\n    };\n\n    const deleteDiff = async (id) => {\n        const theDiffRef = doc(difficultiesRef, id);\n        await updateDoc(theDiffRef, {\n            isDeleted: true,\n        });\n\n        await fetchDiffs();\n\n        message.info('');\n    };\n\n    const openViewModal = (id) => {\n        const currDiff = difficulties.find((d) => d.id === id);\n        const warnHRValues = getExactThresholdValue(\n            currDiff.upperLimitHeartRate,\n        );\n\n        setCurrDiff(currDiff);\n        setWarnHRValues(warnHRValues);\n        setViewModalVisible(true);\n    };\n\n    const openEditModal = (id) => {\n        const currDiff = difficulties.find((d) => d.id === id);\n\n        editForm.setFieldsValue({\n            targetHeartRate: currDiff.targetHeartRate,\n            targetWorkoutTime: currDiff.targetWorkoutTime,\n            upperLimitHeartRate: currDiff.upperLimitHeartRate,\n            note: currDiff.note,\n        });\n\n        setCurrDiff(currDiff);\n        setEditFormChange(currDiff);\n        setEditModalVisible(true);\n    };\n\n    const openCreateModal = () => {\n        setCreateModalVisible(true);\n    };\n\n    const closeAllModals = () => {\n        setViewModalVisible(false);\n        setCreateModalVisible(false);\n        setEditModalVisible(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrDiff();\n        closeAllModals();\n    };\n\n    const closeCreateModal = () => {\n        createForm.resetFields();\n        setCreateFormChange();\n        closeAllModals();\n    };\n\n    const closeEditModal = () => {\n        setCurrDiff();\n        setEditFormChange();\n        closeAllModals();\n    };\n\n    const onFormValueChange = (changedVal, allVal, formKey) => {\n        if (formKey === 'create') setCreateFormChange(allVal);\n        if (formKey === 'edit') setEditFormChange(allVal);\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    const getExactThresholdValue = (upperLimitHeartRate) => {\n        if (!_.isNumber(upperLimitHeartRate)) {\n            return;\n        }\n\n        const calBase = upperLimitHeartRate / 100;\n\n        const overHigh = Math.ceil(calBase * WARN_THRESHOLD.High);\n        const overMedium = Math.ceil(calBase * WARN_THRESHOLD.Medium);\n        const overSlight = Math.ceil(calBase * WARN_THRESHOLD.Slight);\n\n        return [overSlight, overMedium, overHigh];\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"\"\n                        subTitle=\"\"\n                        onBack={goDashboard}\n                        extra={[\n                            <Button\n                                key={1}\n                                type=\"primary\"\n                                icon={<PlusOutlined />}\n                                onClick={openCreateModal}\n                            >\n                                \n                            </Button>,\n                        ]}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={16}>\n                                <Form.Item label=\"\" name=\"name\">\n                                    <Input\n                                        placeholder=\"\"\n                                        allowClear={{\n                                            clearIcon: (\n                                                <CloseCircleFilled\n                                                    onClick={onSearch}\n                                                    style={{\n                                                        color: '#00000040',\n                                                    }}\n                                                />\n                                            ),\n                                        }}\n                                        ref={searchBarRef}\n                                    />\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        \n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(\n                            openViewModal,\n                            openEditModal,\n                            onDeleteDiff,\n                        )}\n                        dataSource={filteredDiffs}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={600}\n                    >\n                        <Descriptions\n                            bordered\n                            className={styles.descriptions}\n                            size=\"middle\"\n                            column={2}\n                        >\n                            <Descriptions.Item label=\"\" span={1}>\n                                {currDiff?.name}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={1}>\n                                {currDiff?.targetWorkoutTime} \n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={2}>\n                                {currDiff?.targetHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={2}>\n                                {currDiff?.upperLimitHeartRate}\n                            </Descriptions.Item>\n                            <Descriptions.Item\n                                label={\n                                    <>\n                                        \n                                        <br />\n                                        <Text\n                                            type=\"secondary\"\n                                            style={{ fontSize: '0.8em' }}\n                                        >\n                                            \n                                        </Text>\n                                    </>\n                                }\n                                span={2}\n                            >\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        warnHRValues?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"\" span={2}>\n                                {currDiff?.note}\n                            </Descriptions.Item>\n                        </Descriptions>\n                    </Modal>\n                    {/*  Modal */}\n                    <Modal\n                        title=\"\"\n                        visible={createModalVisible}\n                        onOk={onCreateDiff}\n                        confirmLoading={loading}\n                        onCancel={closeCreateModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={createForm}\n                            layout=\"horizontal\"\n                            onValuesChange={(changedVal, allVal) =>\n                                onFormValueChange(changedVal, allVal, 'create')\n                            }\n                        >\n                            <Form.Item\n                                label=\"\"\n                                name=\"name\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                            >\n                                <Input placeholder=\"\" />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"\"\n                                name=\"targetWorkoutTime\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={''}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"\"\n                                name=\"targetHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"\"\n                                name=\"upperLimitHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                                tooltip=\"\"\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\" \" colon={false}>\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            createFormChange?.upperLimitHeartRate,\n                                        )?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                    <Modal\n                        title=\"\"\n                        visible={editModalVisible}\n                        onOk={onPatchDiff}\n                        confirmLoading={loading}\n                        onCancel={closeEditModal}\n                        destroyOnClose\n                    >\n                        <Form\n                            {...modalFormLayout}\n                            form={editForm}\n                            layout=\"horizontal\"\n                            onValuesChange={(changedVal, allVal) =>\n                                onFormValueChange(changedVal, allVal, 'edit')\n                            }\n                        >\n                            <Form.Item label=\"\">\n                                {currDiff?.name}\n                            </Form.Item>\n                            <Form.Item\n                                label=\"\"\n                                name=\"targetWorkoutTime\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={''}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"\"\n                                name=\"targetHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item\n                                label=\"\"\n                                name=\"upperLimitHeartRate\"\n                                rules={[\n                                    {\n                                        required: true,\n                                        message: '',\n                                    },\n                                ]}\n                            >\n                                <InputNumber\n                                    min={1}\n                                    max={200}\n                                    addonAfter={'BPM'}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\" \" colon={false}>\n                                <Badge\n                                    color=\"blue\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[0],\n                                        WARN.Slight,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"gold\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[1],\n                                        WARN.Medium,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n\n                                <Badge\n                                    color=\"volcano\"\n                                    text={WarnHRValueDisplay(\n                                        getExactThresholdValue(\n                                            editFormChange?.upperLimitHeartRate,\n                                        )?.[2],\n                                        WARN.High,\n                                    )}\n                                    style={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                    }}\n                                />\n                            </Form.Item>\n                            <Form.Item label=\"\" name=\"note\">\n                                <Input.TextArea\n                                    showCount\n                                    placeholder=\"\"\n                                    maxLength={50}\n                                    autoSize={{ minRows: 3, maxRows: 5 }}\n                                />\n                            </Form.Item>\n                        </Form>\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal, openEditModal, onDeleteDiff) => [\n    {\n        key: 'name',\n        title: '',\n        dataIndex: 'name',\n    },\n    {\n        key: 'targetWorkoutTime',\n        title: '',\n        dataIndex: 'targetWorkoutTime',\n        sorter: {\n            compare: (a, b) => a.targetWorkoutTime - b.targetWorkoutTime,\n        },\n        width: 200,\n    },\n    {\n        key: 'targetHeartRate',\n        title: '',\n        dataIndex: 'targetHeartRate',\n        sorter: {\n            compare: (a, b) => a.targetHeartRate - b.targetHeartRate,\n        },\n        width: 200,\n    },\n    {\n        key: 'upperLimitHeartRate',\n        title: '',\n        dataIndex: 'upperLimitHeartRate',\n        sorter: {\n            compare: (a, b) => a.upperLimitHeartRate - b.upperLimitHeartRate,\n        },\n        width: 200,\n    },\n    {\n        key: 'id',\n        title: ' ',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => {\n            return (\n                <Popover\n                    content={\n                        <Space direction=\"vertical\" size=\"small\">\n                            <Button\n                                type=\"link\"\n                                onClick={() => openViewModal(id)}\n                            >\n                                \n                            </Button>\n                            <Button\n                                type=\"link\"\n                                onClick={() => openEditModal(id)}\n                            >\n                                \n                            </Button>\n                            <Button\n                                type=\"link\"\n                                danger\n                                onClick={() => onDeleteDiff(id)}\n                            >\n                                \n                            </Button>\n                        </Space>\n                    }\n                    trigger=\"click\"\n                    placement=\"left\"\n                >\n                    <MoreOutlined rotate={90} style={{ fontSize: '20px' }} />\n                </Popover>\n            );\n        },\n        width: 150,\n    },\n];\n\nconst WarnHRValueDisplay = (value, warn) => {\n    let phase;\n    let overVal;\n    if (warn === WARN.Slight) {\n        phase = '';\n        overVal = WARN_THRESHOLD.Slight - 100;\n    }\n    if (warn === WARN.Medium) {\n        phase = '';\n        overVal = WARN_THRESHOLD.Medium - 100;\n    }\n    if (warn === WARN.High) {\n        phase = '';\n        overVal = WARN_THRESHOLD.High - 100;\n    }\n\n    return (\n        <div style={{ display: 'flex' }}>\n            {phase}{value}\n            <Text type=\"secondary\" style={{ fontSize: '0.85em' }}>\n                 {overVal}\n            </Text>\n        </div>\n    );\n};\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 10,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nconst modalFormLayout = {\n    labelCol: {\n        span: 6,\n        offset: 2,\n    },\n    wrapperCol: {\n        span: 14,\n    },\n};\n\nexport default DifficulityList;\n","import React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n    collection,\n    doc,\n    getDoc,\n    getDocs,\n    updateDoc,\n} from 'firebase/firestore';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport {\n    Layout,\n    Descriptions,\n    PageHeader,\n    Input,\n    Button,\n    message,\n    Modal,\n} from 'antd';\nimport { UserOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\nimport _ from '../../util/helper';\nimport formatWithMoment from '../../util/formatSeconds';\nimport wait from '../../util/wait';\nimport configLineChart from '../../util/configLineChart';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\n\nconst { Content } = Layout;\n\nconst FinishedWorkout = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const [user, setUser] = useState();\n    const [record, setRecord] = useState();\n    const [packets, setPackets] = useState([]);\n    const [difficulty, setDifficulty] = useState();\n\n    const [isDone, setIsDone] = useState(false);\n\n    // doctor says...\n    const [therapist, setTherapist] = useState();\n    const [comment, setComment] = useState();\n\n    const [inputStatus, setInputStatus] = useState();\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        const packetsRef = collection(recordsRef, params.recordId, 'packets');\n\n        // record\n        const recordSnapshot = await getDoc(recordRef);\n        const recordData = recordSnapshot.data();\n        if (\n            recordData.pairId != null ||\n            recordData.finishedWorkoutTime == null\n        ) {\n            alert('');\n            navigate(ROUTE_PATH.admin_dashbaord);\n            return;\n        }\n        const record = {\n            ...recordData,\n            beginWorkoutTime: recordData.beginWorkoutTime.toDate(),\n            finishedWorkoutTime: recordData.finishedWorkoutTime.toDate(),\n        };\n\n        // packets\n        const packets = [];\n        const packetsSnapshot = await getDocs(packetsRef);\n        packetsSnapshot.forEach((doc) => {\n            packets.push({\n                ...doc.data(),\n                timeLabel: formatWithMoment(doc.data().time),\n            });\n        });\n\n        packets.sort((a, b) => a.time - b.time);\n        packets.splice(0, 1);\n\n        // user\n        const userRef = doc(usersRef, recordData.user);\n        const userSnapshot = await getDoc(userRef);\n        const user = userSnapshot.data();\n\n        // difficulty\n        const difficultyRef = doc(difficultiesRef, recordData.difficulty);\n        const diffSnapshot = await getDoc(difficultyRef);\n        const difficulty = diffSnapshot.data();\n\n        // therapist & comment\n        const therapist = record.therapist ?? '';\n        const comment = record.comment ?? '';\n\n        setUser(user);\n        setRecord(record);\n        setPackets(packets);\n        setDifficulty(difficulty);\n        setTherapist(therapist);\n        setComment(comment);\n        setIsDone(true);\n    };\n\n    const onFormSubmit = async (e) => {\n        e.preventDefault();\n        if (_.isEmpty(therapist)) {\n            message.error('');\n            setInputStatus('error');\n            return;\n        }\n\n        Modal.confirm({\n            title: '',\n            icon: <ExclamationCircleOutlined />,\n            content: '',\n            onOk: () => updateTherapistInfo(),\n        });\n    };\n\n    const updateTherapistInfo = async () => {\n        const recordRef = doc(recordsRef, params.recordId);\n        await updateDoc(recordRef, {\n            therapist: therapist,\n            comment: comment,\n        });\n\n        message.success({ content: '' });\n\n        await wait(1000);\n        navigate(ROUTE_PATH.admin_dashbaord, { replace: true });\n    };\n\n    const calWorkoutTime = () => {\n        const begin = moment(record.beginWorkoutTime);\n        const end = moment(record.finishedWorkoutTime);\n\n        const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n        console.log(diff);\n\n        const h = ('0' + Math.floor(diff / 3600000)).slice(-2);\n        const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2);\n        const s = ('0' + Math.floor((diff / 1000) % 60)).slice(-2);\n\n        let returnStr = '';\n\n        if (h != '00') returnStr += `${h}  `;\n        returnStr += `${m}  ${s} `;\n\n        return returnStr;\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"\"\n                        subTitle=\"\"\n                    />\n\n                    <Descriptions bordered className={styles.descriptions}>\n                        <Descriptions.Item label=\"\" span={2}>\n                            {user?.name}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"\">\n                            {user?.age}\n                        </Descriptions.Item>\n\n                        <Descriptions.Item\n                            label={\n                                <div>\n                                    \n                                    <br />/ \n                                </div>\n                            }\n                        >\n                            {calWorkoutTime()}{difficulty.targetWorkoutTime}{' '}\n                            \n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"\">\n                            {record.beginWorkoutTime.toLocaleString()}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"\">\n                            {record.finishedWorkoutTime.toLocaleString()}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"\">\n                            {difficulty.name}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"\">\n                            {difficulty.targetHeartRate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"\">\n                            {difficulty.upperLimitHeartRate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"RPM\">\n                            <LineChart\n                                {...configLineChart(\n                                    packets,\n                                    record.targetHeartRate,\n                                )}\n                            />\n                        </Descriptions.Item>\n                    </Descriptions>\n\n                    <div className={styles.form}>\n                        <h3></h3>\n\n                        <Input\n                            size=\"large\"\n                            placeholder=\"\"\n                            prefix={<UserOutlined />}\n                            value={therapist}\n                            onChange={(e) => {\n                                setTherapist(e.target.value);\n                                setInputStatus();\n                            }}\n                            status={inputStatus}\n                        />\n                        <Input.TextArea\n                            showCount\n                            placeholder=\"\"\n                            maxLength={50}\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                            style={{ marginTop: 16 }}\n                        />\n\n                        <Button\n                            onClick={onFormSubmit}\n                            type=\"primary\"\n                            style={{ marginTop: 16 }}\n                        >\n                            \n                        </Button>\n                    </div>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nexport default FinishedWorkout;\n","/* eslint-disable react/display-name */\n/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { getDocs, collection } from 'firebase/firestore';\nimport {\n    Layout,\n    Form,\n    PageHeader,\n    Button,\n    Modal,\n    Row,\n    Col,\n    Table,\n    Descriptions,\n    Select,\n} from 'antd';\nimport moment from 'moment';\nimport { DualAxes as LineChart } from '@ant-design/plots';\nimport { SearchOutlined } from '@ant-design/icons';\nimport _ from '../../util/helper';\n\nimport { ROUTE_PATH } from '../../constants';\nimport styles from './styles.module.scss';\n\nimport { recordsRef, usersRef, difficultiesRef } from '../../services/firebase';\nimport formatWithMoment from '../../util/formatSeconds';\nimport configLineChart from '../../util/configLineChart';\n\nconst { Content } = Layout;\nconst { Option } = Select;\n\nconst RecordList = () => {\n    const navigate = useNavigate();\n    const params = useParams();\n\n    const searchBarRef = useRef();\n    const [isDone, setIsDone] = useState(false);\n    const [loading, setLoading] = useState(false); //  packets \n\n    const [records, setReocrds] = useState([]);\n    const [filteredRecords, setFilteredReocrds] = useState([]);\n    const [currRecord, setCurrRecord] = useState();\n    const [currReocrdPackets, setCurrRecordPackets] = useState();\n\n    // patched Data\n    const [users, setUsers] = useState(); //  records \n    const [difficulties, setDifficulties] = useState([]); //  records \n\n    // forms\n    const [searchForm] = Form.useForm();\n\n    // modals\n    const [viewModalVisible, setViewModalVisible] = useState(false);\n\n    useEffect(() => {\n        init();\n    }, []);\n\n    const init = async () => {\n        const users = await fetchUsers();\n        const records = await fetchRecords();\n        const difficulties = await fetchDiffs();\n\n        patchRecordsWithUserAndDiff({ users, records, difficulties });\n    };\n\n    const fetchUsers = async () => {\n        const users = [];\n        const querySnapshot = await getDocs(usersRef);\n        querySnapshot.forEach((doc) => {\n            if (!doc.data()?.isDeleted) {\n                users.push({\n                    ...doc.data(),\n                    id: doc.id,\n                });\n            }\n        });\n\n        return users;\n    };\n\n    const fetchRecords = async () => {\n        const records = [];\n        const querySnapshot = await getDocs(recordsRef);\n        querySnapshot.forEach((doc) => {\n            const recordData = doc.data();\n            if (\n                recordData.beginWorkoutTime != null &&\n                recordData.finishedWorkoutTime != null\n            ) {\n                records.push({\n                    ...recordData,\n                    id: doc.id,\n                    beginWorkoutTime: recordData.beginWorkoutTime.toDate(),\n                    finishedWorkoutTime: recordData.finishedWorkoutTime.toDate(),\n                });\n            }\n        });\n\n        records.sort(\n            (a, b) =>\n                b.finishedWorkoutTime.getTime() -\n                a.finishedWorkoutTime.getTime(),\n        );\n\n        return records;\n    };\n\n    const fetchDiffs = async () => {\n        const difficulties = [];\n        const querySnapshot = await getDocs(difficultiesRef);\n        querySnapshot.forEach((doc) => {\n            difficulties.push({\n                ...doc.data(),\n                id: doc.id,\n            });\n        });\n\n        return difficulties;\n    };\n\n    const patchRecordsWithUserAndDiff = ({ users, records, difficulties }) => {\n        // patch with key [userData]\n        // patch with key [difficultyData]\n\n        const patchedRecords = records.map((record) => {\n            const userData = users.find((u) => u.id === record.user);\n            const difficultyData = difficulties.find(\n                (d) => d.id === record.difficulty,\n            );\n\n            return {\n                ...record,\n                userData,\n                difficultyData,\n            };\n        });\n\n        setReocrds(patchedRecords);\n        setUsers(users);\n        setDifficulties(difficulties);\n        setIsDone(true);\n\n        if (params.userId !== '123') {\n            const filteredRecords = patchedRecords.filter(\n                (r) => r.user === params.userId,\n            );\n            setFilteredReocrds(filteredRecords);\n            searchForm.setFieldsValue({ user: params.userId });\n        } else {\n            setFilteredReocrds(patchedRecords);\n        }\n    };\n\n    const onSearch = async () => {\n        const values = await searchForm.validateFields();\n\n        let filteredRecords = records.filter((r) => {\n            if (_.isEmpty(values.user) && _.isEmpty(values.difficulty)) {\n                return true;\n            }\n            if (_.isNotEmpty(values.user) && _.isNotEmpty(values.difficulty)) {\n                return (\n                    r.user === values.user && r.difficulty === values.difficulty\n                );\n            }\n            if (_.isNotEmpty(values.user) && _.isEmpty(values.difficulty)) {\n                return r.user === values.user;\n            }\n            if (_.isNotEmpty(values.difficulty) && _.isEmpty(values.user)) {\n                console.log('here');\n                return r.difficulty === values.difficulty;\n            }\n        });\n\n        setFilteredReocrds(filteredRecords);\n    };\n\n    const openViewModal = async (id) => {\n        setViewModalVisible(true);\n        setLoading(true);\n\n        const currRecord = records.find((r) => r.id === id);\n        const packetsRef = collection(recordsRef, id, 'packets');\n\n        // packets\n        const currReocrdPackets = [];\n        const packetsSnapshot = await getDocs(packetsRef);\n        packetsSnapshot.forEach((doc) => {\n            currReocrdPackets.push({\n                ...doc.data(),\n                timeLabel: formatWithMoment(doc.data().time),\n            });\n        });\n\n        currReocrdPackets.sort((a, b) => a.time - b.time);\n        currReocrdPackets.splice(0, 1);\n\n        setCurrRecord(currRecord);\n        setCurrRecordPackets(currReocrdPackets);\n\n        setLoading(false);\n    };\n\n    const closeViewModal = () => {\n        setCurrRecord();\n        setCurrRecordPackets([]);\n        setViewModalVisible(false);\n    };\n\n    const goDashboard = () => {\n        navigate(ROUTE_PATH.admin_dashbaord);\n    };\n\n    if (!isDone) {\n        return (\n            <Layout style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        className={styles.PageHeader}\n                        title=\"...\"\n                    />\n                </div>\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <Content className=\"site-layout\" style={{ padding: '24px' }}>\n                <div className={styles.container}>\n                    <PageHeader\n                        title=\"\"\n                        subTitle=\"\"\n                        onBack={goDashboard}\n                    />\n                    <Form\n                        {...formLayout}\n                        form={searchForm}\n                        style={{ marginTop: 36 }}\n                    >\n                        <Row gutter={[16, 0]}>\n                            <Col span={10}>\n                                <Form.Item label=\"\" name=\"user\">\n                                    <Select placeholder=\"\" allowClear>\n                                        {users.map((user) => (\n                                            <Option\n                                                value={user.id}\n                                                key={user.id}\n                                            >\n                                                {user.name}\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n                            <Col span={10}>\n                                <Form.Item label=\"\" name=\"difficulty\">\n                                    <Select\n                                        placeholder=\"\"\n                                        allowClear\n                                    >\n                                        {difficulties.map((diff) => (\n                                            <Option\n                                                value={diff.id}\n                                                key={diff.id}\n                                            >\n                                                {diff.name}\n                                                {diff.targetWorkoutTime}{' '}\n                                                {' '}\n                                                {diff.targetHeartRate} BPM\n                                            </Option>\n                                        ))}\n                                    </Select>\n                                </Form.Item>\n                            </Col>\n                            <Col span={4}>\n                                <Form.Item>\n                                    <Button\n                                        type=\"primary\"\n                                        htmlType=\"submit\"\n                                        onClick={onSearch}\n                                        icon={<SearchOutlined />}\n                                    >\n                                        \n                                    </Button>\n                                </Form.Item>\n                            </Col>\n                        </Row>\n                    </Form>\n                    <Table\n                        columns={columns(openViewModal)}\n                        dataSource={filteredRecords}\n                        pagination={{ pageSize: 5 }}\n                        style={{ marginLeft: 24, marginRight: 24 }}\n                    />\n                    <Modal\n                        title=\"\"\n                        visible={viewModalVisible}\n                        onCancel={closeViewModal}\n                        footer={null} // no [Ok], [Cancel] button\n                        width={'90vw'}\n                    >\n                        {loading ? (\n                            '...'\n                        ) : (\n                            <>\n                                <Descriptions\n                                    bordered\n                                    className={styles.descriptions}\n                                >\n                                    <Descriptions.Item\n                                        label=\"\"\n                                        span={2}\n                                    >\n                                        {currRecord?.userData?.name}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"\">\n                                        {currRecord?.userData?.age}\n                                    </Descriptions.Item>\n\n                                    <Descriptions.Item\n                                        label={\n                                            <div>\n                                                \n                                                <br />/ \n                                            </div>\n                                        }\n                                    >\n                                        {calWorkoutTime(currRecord)}\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.targetWorkoutTime\n                                        }{' '}\n                                        \n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"\">\n                                        {currRecord?.beginWorkoutTime.toLocaleString()}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"\">\n                                        {currRecord?.finishedWorkoutTime.toLocaleString()}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"\">\n                                        {currRecord?.difficultyData?.name}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"\">\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.targetHeartRate\n                                        }\n                                    </Descriptions.Item>\n                                    <Descriptions.Item label=\"\">\n                                        {\n                                            currRecord?.difficultyData\n                                                ?.upperLimitHeartRate\n                                        }\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"RPM\"\n                                        span={3}\n                                    >\n                                        <LineChart\n                                            {...configLineChart(\n                                                currReocrdPackets,\n                                                currRecord?.targetHeartRate,\n                                            )}\n                                        />\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"\"\n                                        span={3}\n                                    >\n                                        {currRecord?.therapist}\n                                    </Descriptions.Item>\n                                    <Descriptions.Item\n                                        label=\"\"\n                                        span={3}\n                                    >\n                                        {currRecord?.comment}\n                                    </Descriptions.Item>\n                                </Descriptions>\n                            </>\n                        )}\n                    </Modal>\n                </div>\n            </Content>\n        </Layout>\n    );\n};\n\nconst columns = (openViewModal) => [\n    {\n        key: 'id',\n        title: 'ID',\n        dataIndex: 'id',\n        width: 150,\n        render: (id) => `${id.slice(0, 5)}....`,\n    },\n    {\n        key: 'userData',\n        title: '',\n        dataIndex: 'userData',\n        width: 200,\n        render: (userData) => userData?.name,\n    },\n    {\n        key: 'difficulty',\n        title: '',\n        dataIndex: 'difficultyData',\n        width: 200,\n        render: (difficultyData) => difficultyData?.name,\n    },\n    {\n        key: 'difficulty',\n        title: '',\n        dataIndex: 'beginWorkoutTime',\n        width: 200,\n        render: (beginWorkoutTime) => beginWorkoutTime.toLocaleString(),\n    },\n    {\n        key: 'beginWorkoutTime',\n        title: '',\n        width: 200,\n        render: (currRecord) => calWorkoutTime(currRecord),\n    },\n    {\n        key: 'id',\n        title: ' ',\n        dataIndex: 'id',\n        align: 'center',\n        render: (id) => (\n            <Button type=\"link\" onClick={() => openViewModal(id)}>\n                \n            </Button>\n        ),\n        width: 150,\n    },\n];\n\nconst calWorkoutTime = (currRecord) => {\n    if (_.isEmpty(currRecord)) {\n        return;\n    }\n    const begin = moment(currRecord?.beginWorkoutTime);\n    const end = moment(currRecord?.finishedWorkoutTime);\n\n    const diff = moment.duration(end.diff(begin)).asMilliseconds();\n\n    const h = ('0' + Math.floor(diff / 3600000)).slice(-2);\n    const m = ('0' + Math.floor((diff / 60000) % 60)).slice(-2);\n    const s = ('0' + Math.floor((diff / 1000) % 60)).slice(-2);\n\n    let returnStr = '';\n\n    if (h != '00') returnStr += `${h}  `;\n    returnStr += `${m}  ${s} `;\n\n    return returnStr;\n};\n\nconst formLayout = {\n    labelCol: {\n        // span: 8,\n        offset: 2,\n    },\n    wrapperCol: {\n        span: 16,\n    },\n};\n\nexport default RecordList;\n","import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\nimport { ROUTE_PATH, ROLES } from '../constants/';\n\nimport ProtectedRoutes from './ProtectedRoutes';\nimport SignIn from '../layouts/SignIn';\nimport AdminDashboard from '../layouts/AdminDashboard';\nimport Missing from '../layouts/Missing';\nimport Unauthorized from '../layouts/Unauthorized';\nimport PrepareWorkout from '../layouts/PrepareWorkout';\nimport MonitoringWorkout from '../layouts/MonitoringWorkout';\nimport UserList from '../layouts/UserList';\nimport DifficulityList from '../layouts/DifficulityList';\nimport FinishedWorkout from '../layouts/FinishedWorkout';\nimport RecordList from '../layouts/RecordList';\n\nconst AppRoutes = () => {\n    return (\n        <Routes>\n            <Route\n                path={ROUTE_PATH.home}\n                element={<Navigate replace to={ROUTE_PATH.sign_in} />}\n            />\n            <Route path={ROUTE_PATH.sign_in} element={<SignIn />} />\n            <Route path={ROUTE_PATH.unauthorized} element={<Unauthorized />} />\n\n            {/* only Admin can visit */}\n            <Route element={<ProtectedRoutes allowedRoles={[ROLES.Admin]} />}>\n                <Route\n                    path={ROUTE_PATH.admin_dashbaord}\n                    element={<AdminDashboard />}\n                />\n                <Route\n                    path={ROUTE_PATH.prepare_workout}\n                    element={<PrepareWorkout />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.monitoring_workout}/:recordId`}\n                    element={<MonitoringWorkout />}\n                />\n                <Route path={ROUTE_PATH.user_list} element={<UserList />} />\n                <Route\n                    path={`${ROUTE_PATH.record_list}/:userId`}\n                    element={<RecordList />}\n                />\n                <Route\n                    path={ROUTE_PATH.difficulty_list}\n                    element={<DifficulityList />}\n                />\n                <Route\n                    path={`${ROUTE_PATH.finsished_workout}/:recordId`}\n                    element={<FinishedWorkout />}\n                />\n            </Route>\n\n            {/* catch all */}\n            <Route path=\"*\" element={<Missing />} />\n        </Routes>\n    );\n};\n\nexport default AppRoutes;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\nimport { ConfigProvider } from 'antd';\nimport 'moment/locale/zh-tw';\nimport locale from 'antd/lib/locale/zh_TW';\nimport React, { useEffect, useState } from 'react';\nimport { useStore } from '../../store';\nimport { SET_AUTH } from '../../store/actions';\nimport _ from '../../util/helper';\n// import moment from 'moment';\n\n// import styles from './styles.module.scss';\nimport 'antd/dist/antd.css';\nimport '@ant-design/flowchart/dist/index.css';\n\n/*\n    expect: \n        ConfigProvider\n*/\n\nconst AppProvider = ({ children }) => {\n    const { dispatch } = useStore();\n    const [initializedDone, setInitializedDone] = useState(false);\n\n    useEffect(() => {\n        attempLogin();\n\n        window.addEventListener('beforeunload', beforeunloadListener);\n        window.addEventListener('visibilitychange', visibilitychangeListener);\n        return () => {\n            window.removeEventListener(\n                'beforeunload',\n                visibilitychangeListener,\n            );\n        };\n    }, []);\n\n    const beforeunloadListener = (e) => {\n        e.preventDefault();\n\n        dispatch({\n            type: SET_AUTH,\n            payload: {\n                isValid: false,\n                roles: [],\n            },\n        });\n    };\n\n    const visibilitychangeListener = (e) => {\n        if (document.visibilityState == 'hidden') {\n            dispatch({\n                type: SET_AUTH,\n                payload: {\n                    isValid: false,\n                    roles: [],\n                },\n            });\n        }\n    };\n\n    const attempLogin = () => {\n        // console.log('executing attemp login');\n        // const expiredIn = window.localStorage.getItem(\n        //     'inventory-system-expired-in',\n        // );\n        setInitializedDone(true);\n\n        // Example Down Below\n        // if (_.isNullOrUndefined(expiredIn)) {\n        //     setInitializedDone(true);\n        //     return;\n        // }\n        // if (moment(expiredIn).endOf('day').isSameOrAfter(moment())) {\n        //     dispatch({\n        //         type: SET_AUTH,\n        //         payload: {\n        //             isValid: true,\n        //             roles: [5051],\n        //         },\n        //     });\n        // }\n        // setInitializedDone(true);\n    };\n\n    if (!initializedDone) {\n        return null;\n    }\n\n    return <ConfigProvider locale={locale}>{children}</ConfigProvider>;\n};\n\nexport default AppProvider;\n\n// Example Down Below\n\n// /* eslint-disable react/prop-types */\n// import React from 'react';\n// import { ConfigProvider } from 'antd';\n// import 'moment/locale/zh-tw';\n// import locale from 'antd/lib/locale/zh_TW';\n\n// // import styles from './styles.module.scss';\n\n// const App = ({ children }) => (\n//     <ConfigProvider locale={locale}>{children}</ConfigProvider>\n// );\n\n// export default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './global.scss';\n\nimport { StoreProvider } from './store';\nimport AppRoutes from './routes';\nimport AppProvider from './layouts/App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <StoreProvider>\n            <BrowserRouter basename=\"backstage\">\n                <AppProvider>\n                    {/* <Routes>\n                        <Route path=\"*\" element={<AppRoutes />} />\n                    </Routes> */}\n                    <AppRoutes />\n                </AppProvider>\n            </BrowserRouter>\n        </StoreProvider>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}